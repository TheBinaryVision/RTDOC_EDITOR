{"ast":null,"code":"var _jsxFileName = \"C:\\\\Internship Project\\\\RTDOC_EDITOR\\\\client\\\\src\\\\pages\\\\Editor.jsx\";\nimport { useEffect, useCallback, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport Quill from 'quill';\nimport 'quill/dist/quill.snow.css';\nimport socket from '../socket';\nconst SAVE_INTERVAL_MS = 2000;\nconst Editor = () => {\n  const {\n    id: documentId\n  } = useParams();\n  const [quill, setQuill] = useState();\n\n  // Load document from server\n  useEffect(() => {\n    if (!socket || !quill) return;\n    socket.once(\"load-document\", document => {\n      quill.setContents(document);\n      quill.enable();\n    });\n    socket.emit(\"get-document\", documentId);\n  }, [socket, quill, documentId]);\n\n  // Send changes\n  useEffect(() => {\n    if (!socket || !quill) return;\n    const handler = delta => {\n      socket.emit(\"send-changes\", delta);\n    };\n    quill.on(\"text-change\", handler);\n    return () => {\n      quill.off(\"text-change\", handler);\n    };\n  }, [socket, quill]);\n\n  // Receive changes\n  useEffect(() => {\n    if (!socket || !quill) return;\n    const handler = delta => {\n      quill.updateContents(delta);\n    };\n    socket.on(\"receive-changes\", handler);\n    return () => {\n      socket.off(\"receive-changes\", handler);\n    };\n  }, [socket, quill]);\n\n  // Auto-save\n  useEffect(() => {\n    if (!socket || !quill) return;\n    const interval = setInterval(() => {\n      socket.emit(\"save-document\", quill.getContents());\n    }, SAVE_INTERVAL_MS);\n    return () => {\n      clearInterval(interval);\n    };\n  }, [socket, quill]);\n\n  // Quill init\n  const wrapperRef = useCallback(wrapper => {\n    if (!wrapper) return;\n    wrapper.innerHTML = \"\";\n    const editor = document.createElement(\"div\");\n    wrapper.append(editor);\n    const q = new Quill(editor, {\n      theme: \"snow\"\n    });\n    q.disable();\n    q.setText(\"Loading...\");\n    setQuill(q);\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    ref: wrapperRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 10\n    }\n  });\n};\nexport default Editor;","map":{"version":3,"names":["useEffect","useCallback","useState","useParams","Quill","socket","SAVE_INTERVAL_MS","Editor","id","documentId","quill","setQuill","once","document","setContents","enable","emit","handler","delta","on","off","updateContents","interval","setInterval","getContents","clearInterval","wrapperRef","wrapper","innerHTML","editor","createElement","append","q","theme","disable","setText","React","className","ref","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["C:/Internship Project/RTDOC_EDITOR/client/src/pages/Editor.jsx"],"sourcesContent":["import { useEffect, useCallback, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport Quill from 'quill';\r\nimport 'quill/dist/quill.snow.css';\r\nimport socket from '../socket';\r\n\r\nconst SAVE_INTERVAL_MS = 2000;\r\n\r\nconst Editor = () => {\r\n  const { id: documentId } = useParams();\r\n  const [quill, setQuill] = useState();\r\n\r\n  // Load document from server\r\n  useEffect(() => {\r\n    if (!socket || !quill) return;\r\n\r\n    socket.once(\"load-document\", document => {\r\n      quill.setContents(document);\r\n      quill.enable();\r\n    });\r\n\r\n    socket.emit(\"get-document\", documentId);\r\n  }, [socket, quill, documentId]);\r\n\r\n  // Send changes\r\n  useEffect(() => {\r\n    if (!socket || !quill) return;\r\n\r\n    const handler = delta => {\r\n      socket.emit(\"send-changes\", delta);\r\n    };\r\n    quill.on(\"text-change\", handler);\r\n\r\n    return () => {\r\n      quill.off(\"text-change\", handler);\r\n    };\r\n  }, [socket, quill]);\r\n\r\n  // Receive changes\r\n  useEffect(() => {\r\n    if (!socket || !quill) return;\r\n\r\n    const handler = delta => {\r\n      quill.updateContents(delta);\r\n    };\r\n    socket.on(\"receive-changes\", handler);\r\n\r\n    return () => {\r\n      socket.off(\"receive-changes\", handler);\r\n    };\r\n  }, [socket, quill]);\r\n\r\n  // Auto-save\r\n  useEffect(() => {\r\n    if (!socket || !quill) return;\r\n\r\n    const interval = setInterval(() => {\r\n      socket.emit(\"save-document\", quill.getContents());\r\n    }, SAVE_INTERVAL_MS);\r\n\r\n    return () => {\r\n      clearInterval(interval);\r\n    };\r\n  }, [socket, quill]);\r\n\r\n  // Quill init\r\n  const wrapperRef = useCallback(wrapper => {\r\n    if (!wrapper) return;\r\n\r\n    wrapper.innerHTML = \"\";\r\n    const editor = document.createElement(\"div\");\r\n    wrapper.append(editor);\r\n\r\n    const q = new Quill(editor, {\r\n      theme: \"snow\",\r\n    });\r\n    q.disable();\r\n    q.setText(\"Loading...\");\r\n    setQuill(q);\r\n  }, []);\r\n\r\n  return <div className=\"container\" ref={wrapperRef}></div>;\r\n};\r\n\r\nexport default Editor;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}